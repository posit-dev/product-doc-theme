<!-- Google Analytics 4 (G-XXXXXXXXXX) -->
<script>
 /* Use GA when hosted by our public docs site, not when installed. */
 if (location.href.indexOf("docs.posit.co") >= 0) {
     window.dataLayer = window.dataLayer || []
     function gtag() { dataLayer.push(arguments) }
     /* Set up integration and send page view */
     gtag("js", new Date())
     gtag("config", "GTM-KHBDBW7")

     /* Register virtual event handlers */
     document.addEventListener("DOMContentLoaded", function () {
         if (document.forms.search) {
             var query = document.forms.search.query
             query.addEventListener("blur", function () {
                 if (this.value) {
                     gtag("event", "search", { search_term: this.value })
                 }
             })
         }

         /* Send page view on location change */
         if (typeof location$ !== "undefined")
             location$.subscribe(function (url) {
                 gtag("config", "GTM-KHBDBW7", {
                     page_path: url.pathname
                 })
             })
     })
     /* Create script tag */
     var script = document.createElement("script")
     script.async = true
     script.src = "https://www.googletagmanager.com/gtag/js?id=GTM-KHBDBW7"

     /* Inject script tag */
     var container = document.getElementsByTagName("head")[0]
     var firstChild = container.firstChild
     container.insertBefore(script, firstChild)
 }
</script>
